{
  "description": {
    "spec-version": {
      "Right": ">=1.2"
    },
    "package": {
      "name": "priority-sync",
      "version": [
        0,
        1,
        0,
        1
      ]
    },
    "license": {
      "Right": "BSD3"
    },
    "license-files": [
      "LICENSE"
    ],
    "copyright": "",
    "maintainer": "Christopher Lane Hinson <lane@downstairspeople.org>",
    "author": "Christopher Lane Hinson",
    "stability": "Unstable",
    "tested-with": [
      {
        "compiler": "GHC",
        "versionRange": "==6.10.1"
      }
    ],
    "homepage": "",
    "pkg-url": "",
    "bug-reports": "",
    "source-repos": [],
    "synopsis": "Cooperative task prioritization.",
    "description": "In a simple use case, we want to run some expensive tasks in prioritized order, so that only one task is running on each\nCPU (or hardware thread) at any time.   For this simple case, four operations are needed: 'simpleTaskPool',\n'schedule', 'claim', and 'startQueue'.\n\n@\nlet expensiveTask = threadDelay 1000000\npool <- simpleTaskPool\nforkIO $ claim Acquire (schedule pool 1) $ putStrLn \\\"Task 1 started . . .\\\" >> expensiveTask >> putStrLn \\\"Task 1 completed.\\\"\nforkIO $ claim Acquire (schedule pool 3) $ putStrLn \\\"Task 3 started . . .\\\" >> expensiveTask >> putStrLn \\\"Task 3 completed.\\\"\nforkIO $ claim Acquire (schedule pool 2) $ putStrLn \\\"Task 2 started . . .\\\" >> expensiveTask >> putStrLn \\\"Task 2 completed.\\\"\nthreadDelay 100000  -- contrive to wait for all tasks to become enqueued\nputStrLn \\\"Starting pool: \\\"\nstartQueue pool\nthreadDelay 4000000 -- contrive to wait for all tasks to become dequeued\n@\n\nA 'TaskPool' combines 'Room's and 'Queue's in an efficient easy-to-use-interface.\n\n'Room's provide fully reentrant synchronization to any number of threads based on arbitrary resource constraints.\nFor example, the 'Room' from a 'simpleTaskPool' is constrained by 'GHC.numCapabilities'.\n\n'Queue's provide task prioritization.  A 'Queue' systematically examines (to a configurable depth) all waiting threads with their\npriorities and resource constraints and wakes the most eagerly prioritized thread whose constraints can be satisfied.\n\n'TaskPool's are not thread pools.  The concept is similar to IO Completion Ports.  There are no worker threads.  If a number of threads are waiting,\nthe thread that is most likely to be processed next is woken and temporarily serves as a working thread.\n\n'Room's, 'Queue's, and 'TaskPool's are backed by carefully written STM (software transactional memory) transactions.\n\nA salient feature is that, because any thread can participate, a 'TaskPool' supports both bound threads and threads created with 'forkOnIO'.\n\nThe git repository is available at <http://www.downstairspeople.org/git/priority-sync.git>.",
    "category": "Concurrency",
    "custom-fields": [],
    "build-type-raw": "Simple",
    "custom-setup": null,
    "library": null,
    "sublibraries": [],
    "executables": [],
    "foreign-libs": [],
    "test-suites": [],
    "benchmarks": [],
    "data-files": [],
    "data-dir": ".",
    "extra-source-files": [],
    "extra-tmp-files": [],
    "extra-doc-files": []
  },
  "library": {
    "condTreeData": {
      "name": {},
      "exposed-modules": [
        [
          "Control",
          "Concurrent",
          "Priority",
          "Room"
        ],
        [
          "Control",
          "Concurrent",
          "Priority",
          "Queue"
        ],
        [
          "Control",
          "Concurrent",
          "Priority",
          "RoomConstraint"
        ],
        [
          "Control",
          "Concurrent",
          "Priority",
          "Schedule"
        ],
        [
          "Control",
          "Concurrent",
          "Priority",
          "TaskPool"
        ]
      ],
      "re-exported-modules": [],
      "signatures": [],
      "exposed": true,
      "visibility": "LibraryVisibilityPublic",
      "build-info": {
        "buildable": true,
        "buildTools": [],
        "buildToolDepends": [],
        "cppOptions": [],
        "asmOptions": [],
        "cmmOptions": [],
        "ccOptions": [],
        "cxxOptions": [],
        "ldOptions": [],
        "pkgconfigDepends": [],
        "frameworks": [],
        "extraFrameworkDirs": [],
        "asmSources": [],
        "cmmSources": [],
        "cSources": [],
        "cxxSources": [],
        "jsSources": [],
        "hsSourceDirs": [],
        "otherModules": [
          [
            "Control",
            "Concurrent",
            "Priority",
            "RoomCore"
          ]
        ],
        "virtualModules": [],
        "autogenModules": [],
        "defaultLanguage": null,
        "otherLanguages": [],
        "defaultExtensions": [],
        "otherExtensions": [],
        "oldExtensions": [],
        "extraLibs": [],
        "extraGHCiLibs": [],
        "extraBundledLibs": [],
        "extraLibFlavours": [],
        "extraDynLibFlavours": [],
        "extraLibDirs": [],
        "includeDirs": [],
        "includes": [],
        "autogenIncludes": [],
        "installIncludes": [],
        "options": [
          [
            "-Wall",
            "-fno-warn-type-defaults"
          ],
          []
        ],
        "profOptions": [
          [
            "-prof",
            "-auto-all"
          ],
          []
        ],
        "sharedOptions": [
          [],
          []
        ],
        "staticOptions": [
          [],
          []
        ],
        "customFieldsBI": [],
        "targetBuildDepends": [
          {
            "package-name": "base",
            "version-range": ">3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "containers",
            "version-range": ">=0.1.0.1",
            "library": [
              {}
            ]
          },
          {
            "package-name": "heap",
            "version-range": "-any",
            "library": [
              {}
            ]
          },
          {
            "package-name": "parallel",
            "version-range": ">=1.0.0.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "stm",
            "version-range": ">=2.1.1.2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "random",
            "version-range": "-any",
            "library": [
              {}
            ]
          }
        ],
        "mixins": []
      }
    },
    "condTreeConstraints": [
      {
        "package-name": "base",
        "version-range": ">3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "containers",
        "version-range": ">=0.1.0.1",
        "library": [
          {}
        ]
      },
      {
        "package-name": "heap",
        "version-range": "-any",
        "library": [
          {}
        ]
      },
      {
        "package-name": "parallel",
        "version-range": ">=1.0.0.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "stm",
        "version-range": ">=2.1.1.2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "random",
        "version-range": "-any",
        "library": [
          {}
        ]
      }
    ],
    "condTreeComponents": []
  },
  "executables": {
    "_Control_Concurrent_Priority_Tests": {
      "condTreeData": {
        "name": "_Control_Concurrent_Priority_Tests",
        "module-path": "Tests.hs",
        "scope": "public",
        "build-info": {
          "buildable": true,
          "buildTools": [],
          "buildToolDepends": [],
          "cppOptions": [],
          "asmOptions": [],
          "cmmOptions": [],
          "ccOptions": [],
          "cxxOptions": [],
          "ldOptions": [],
          "pkgconfigDepends": [],
          "frameworks": [],
          "extraFrameworkDirs": [],
          "asmSources": [],
          "cmmSources": [],
          "cSources": [],
          "cxxSources": [],
          "jsSources": [],
          "hsSourceDirs": [],
          "otherModules": [],
          "virtualModules": [],
          "autogenModules": [],
          "defaultLanguage": null,
          "otherLanguages": [],
          "defaultExtensions": [],
          "otherExtensions": [],
          "oldExtensions": [],
          "extraLibs": [],
          "extraGHCiLibs": [],
          "extraBundledLibs": [],
          "extraLibFlavours": [],
          "extraDynLibFlavours": [],
          "extraLibDirs": [],
          "includeDirs": [],
          "includes": [],
          "autogenIncludes": [],
          "installIncludes": [],
          "options": [
            [
              "-Wall",
              "-threaded",
              "-fno-warn-type-defaults"
            ],
            []
          ],
          "profOptions": [
            [
              "-prof",
              "-auto-all"
            ],
            []
          ],
          "sharedOptions": [
            [],
            []
          ],
          "staticOptions": [
            [],
            []
          ],
          "customFieldsBI": [],
          "targetBuildDepends": [
            {
              "package-name": "base",
              "version-range": ">3",
              "library": [
                {}
              ]
            }
          ],
          "mixins": []
        }
      },
      "condTreeConstraints": [
        {
          "package-name": "base",
          "version-range": ">3",
          "library": [
            {}
          ]
        }
      ],
      "condTreeComponents": []
    }
  }
}
